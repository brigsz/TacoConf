function initDropdown(){$('[data-toggle="drop"]:not(.drop-processed)').click(function(t){t.preventDefault(),t.stopPropagation(),$(this).addClass("drop-processed");var e=$(this).parents(".drop");e.toggleClass("open"),$(".drop.open").not(e).removeClass("open")}),$("body:not(.drop-processed)").each(function(){$(this).addClass("drop-processed"),$(document).click(function(){$(".drop.open").removeClass("open")})})}!function(){$(document).ready(function(){$(".flexslider").flexslider({animation:"slide",useCSS:!0,animationLoop:!1})}),$(document).keyup(function(t){var e=null;switch(t.keyCode){case 39:e=$("[data-pager-next]:not(.disabled)");break;case 37:e=$("[data-pager-prev]:not(.disabled)");break;case 72:e=$("#site-title a");break;case 80:e=$('#global-menu a[href="/projects"]');break;case 66:e=$('#global-menu a[href="/blog"]');break;case 84:e=$('#global-menu a[href="/team"]');break;case 65:e=$('#global-menu a[href="/about"]')}!$("body").hasClass("search-on")&&e&&e.length&&e[0].click()})}(),$(function(){initDropdown()}),DSO=DSO||{},window.partial=DSO.partial=function(t,e){return JST[t+".ejs"](e)},DSO.widont=function(t,e){e=e||18,t=t.replace(/&nbsp;([^\s]+)$/," $1");var n=t.split(" ");if(n.length>1){var i=n.length,o=(n[i-1]+" "+n[i-2]).length;if("always"==e||e>o)return t.replace(/\s([^\s]+)\s*$/,"&nbsp;$1")}return t},function(){$(document).ready(function(){$("[data-gh-project]").each(function(){var t=$(this),e=t.data("gh-project");$.get("https://api.github.com/repos/"+e).success(function(e){t.find(".fork a").text(e.forks_count),t.find(".star a").text(e.stargazers_count)})})})}(),function(){function t(){var t=32;return this.check=function(){if($("[data-metabar]").length){var e=$("[data-metabar]").parent().offset(),n=$(window).height();if(!(e.top<=n)){var i=$(window).scrollTop()+n+t;i>=e.top?$("[data-metabar]").removeClass("revealed").find('[data-toggle="drop"]').parent().removeClass("open"):$("[data-metabar]").addClass("revealed")}}},this.init=function(){$(window).load(this.check).scroll(this.check),this.check()},this}DSO.metabar=new t}(),function(){$(document).ready(function(){$("[data-tweet-count]").each(function(){function t(t){$.ajax({url:"https://cdn.api.twitter.com/1/urls/count.json",data:{url:t},dataType:"jsonp"}).success(function(t){n+=t.count;var i=n+(1==n?" tweet":" tweets");e.text(i)})}var e=$(this),n=0,i=e.data("tweet-count");t(i.replace(/https?:\/\/(www.)?/,"http://")),t(i.replace(/https?:\/\/(www.)?/,"http://www.")),t(i.replace(/https?:\/\/(www.)?/,"https://")),t(i.replace(/https?:\/\/(www.)?/,"https://www."))})})}(),DSO.Views=DSO.Views||{},function(){DSO.Views.BlogList=function(t){this.container=t.container;var e=[],n=this,i=JST["card-list.ejs"],o=9,r=1;this.init=function(){this.requestAndRender()},this.requestAndRender=function(){n.render(!0),n.request(function(){n.render()})},this.request=function(t){$.get("/api/blog_posts.json").success(function(n){e=n,t(n)})},this.render=function(t){t=t||!1;var n=e.slice(0,r*o);this.container.html(i({posts:n,loading:t,type:"blog",more:e.length>n.length,count:{total:e.length,showing:n.length}})),this.addEventListeners()},this.addEventListeners=function(){this.container.find("[data-load-more]").click(function(t){t.preventDefault(),r++,n.render()})},this.init()}}(),DSO.Views=DSO.Views||{},function(){DSO.Views.ProjectList=function(t){this.container=t.container;var e=[],n=this,i=JST["card-list.ejs"],o=9,r=1;this.init=function(){this.requestAndRender()},this.requestAndRender=function(){n.render(!0),n.request(function(){n.render()})},this.request=function(t){$.ajax({url:"/api/projects.json",dataType:"json"}).done(function(n){e=n,t(n)})},this.render=function(t){t=t||!1;var n=e.slice(0,r*o);this.container.html(i({posts:n,loading:t,type:"project",more:e.length>n.length,count:{total:e.length,showing:n.length}})),this.addEventListeners()},this.addEventListeners=function(){this.container.find("[data-load-more]").click(function(t){t.preventDefault(),r++,n.render()})},this.init()}}(),DSO.Views=DSO.Views||{},function(){DSO.Views.ProjectMap=function(t){this.container=t.container;var e=this,n={},i=JST["map-popup.ejs"];this.init=function(){L.mapbox.accessToken="pk.eyJ1IjoibmF0ZSIsImEiOiItQjVUSm8wIn0.B_AesFQdWjmbfnMWPhV0eg",this.requestAndRender()},this.requestAndRender=function(){e.request(function(){e.render()})},this.request=function(t){$.ajax({url:"/api/map.geojson",dataType:"json"}).done(function(e){n=e,t(e)})},this.render=function(){var t=L.mapbox.map(this.container[0],"nate.lb3lk12d",{zoomControl:!1,minZoom:2,maxZoom:5,maxBounds:L.latLngBounds([-90,-180],[90,180]),tileLayer:{continuousWorld:!0}}).setView([38.1089,13.3545],2);t.scrollWheelZoom.disable();var e=L.mapbox.featureLayer(n);e.eachLayer(function(t){var e=t.feature.properties,n=["marker"];e.type&&n.push(e.type),e.highlight&&n.push("highlight");var o=L.divIcon({className:n.join(" "),iconSize:[],popupAnchor:[0,0],html:"<span></span>"});t.setIcon(o),t.on("popupopen",function(t){var e=parseInt($(t.target._icon).css("margin-top").replace("px",""),10)-16;t.popup.options.offset.y=e,t.popup.update()}),t.bindPopup(i(e))}),t.addLayer(e)},this.addEventListeners=function(){},this.init()}}(),DSO.Views=DSO.Views||{},function(){DSO.Views.Search=function(t){this.container=t.container,this.resContainer=null;var e=[],n=this,i=JST["search.ejs"],o=JST["search-results.ejs"];this.init=function(){this.request(),this.render()},this.request=function(){$.ajax({url:"/api/search.json",dataType:"json"}).done(function(t){e=t,e.forEach(function(t){t.searchable=(t.title+t.introduction).toLowerCase()})})},this.render=function(){this.container.html(i()),this.resContainer=this.container.find("[data-search-results]"),this.renderResults(null,[]),this.addEventListeners()},this.renderResults=function(t,e){this.resContainer.html(o({term:t,results:e.slice(0,16),highlight:function(e){if(t){var i=n.extractSearchWords(t);_.forEach(i,function(t){e=e.replace(new RegExp("("+t+")","gi"),"<i>$1</i>")})}return e}}))},this.addEventListeners=function(){this.container.find("[data-search-query]").on("keyup",function(){var t=$(this).val();if(t.length>2){var e=n.search(t);n.renderResults(t,e)}else n.renderResults(null,[])}),this.container.find("[data-search-query]").parents("form").on("submit",function(t){t.preventDefault()}),$("body").on("keyup",function(t){$("body").hasClass("search-on")||83!=t.keyCode?$("body").hasClass("search-on")&&27==t.keyCode&&n.closeSearch():n.openSearch()}),$("[data-search-open]").on("click",function(t){t.preventDefault(),n.openSearch()}),this.container.find("[data-search-close]").on("click",function(t){t.preventDefault(),n.closeSearch()})},this.openSearch=function(){n.container.addClass("revealed"),$("body").addClass("search-on"),setTimeout(function(){n.container.find("[data-search-query]").focus()},250)},this.closeSearch=function(){n.container.removeClass("revealed"),n.container.find("[data-search-query]").blur(),$("body").removeClass("search-on")},this.extractSearchWords=function(t){var e=t.toLowerCase().match(/(\w+)/g);return _.filter(e,function(t){return t.length>2})},this.search=function(t){var n=this.extractSearchWords(t),i=_.filter(e,function(t){for(var e in n){var i=n[e];if(-1===t.searchable.indexOf(i))return!1}return!0});return i},this.init()}}(),$(function(){new DSO.Views.Search({container:$("[data-search-container]")})});
//# sourceMappingURL=main.min.js.map